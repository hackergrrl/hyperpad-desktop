
<link href="quill.snow.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="style.css"/>

<div id="left" class="left-side"></div>
<div id="right" class="right-side">
  <h1 id="doc-title">Untitled hyperpad document</h1>
</div>

<!-- Initialize Quill editor -->
<script>
  var Quill = require('quill')
  var Doc = require('./document')
  var renderDocumentList = require('./document-list')(onSelected)

  var theDocs = []

  var lst = renderDocumentList(theDocs)
  document.getElementById('left').appendChild(lst)

  var doc

  var editorElement = document.createElement("div");
  editorElement.id = 'editor'
  document.getElementById('right').appendChild(editorElement);
  var editor = new Quill('#editor', {
    modules: { toolbar: '' },
    theme: 'snow'
  });
  editorElement.style.height = (window.innerHeight - 100) + 'px';
  editorElement.style.width = (window.innerWidth - 0) + 'px';
  editorElement.classList.add('editor')
  editorElement.style['font-family'] = '"SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace'

  function onSelected (hash) {
    console.log('SELECTED', hash)

    if (hash === '&create') {
      alert('TODO: implement me')
    } else if (hash === '&add') {
      alert('TODO: implement me')
    } else {
      document.getElementById('doc-title').innerText = hash
      if (doc) {
        doc.unregister(function () {
          console.log('unregisterd')
          doc = Doc(hash, editor)
        })
      } else {
        doc = Doc(hash, editor)
      }
    }
  }
</script>
